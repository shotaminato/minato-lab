
:stem: latexmath

# ECC (Error Correction Code) を用いた 1bit 誤り訂正の実装方法と原理

## ECC とは

ECC (Error Correction Code) とは、データの誤りを検出し、訂正するための技術です。ECC は、特にメモリやストレージデバイスにおいて、データの整合性を保つために使用されます。ECC は、データが転送中や保存中に発生する可能性のあるエラーを検出し、自動的に修正することができます。

ECCには、いくつかの異なるアルゴリズムがありますが、最も一般的なものは Hamming コードです。Hamming コードは、 stem:[1] ビットのエラーを検出し訂正するために使用されます。

## Hamming コードを用いた 1bit 誤り訂正の方法

### 必要パリティbit数の計算

Hamming コードを使用して  stem:[1] ビットのエラーを訂正するためには、データビット数 stem:[m] に対して、必要なパリティビット数 stem:[r] を計算する必要があります。ここで stem:[r] は次の不等式を満たす整数 stem:[r] のうち、最も小さい値です。

[stem]
++++
2^r \geqq m + r + 1
++++

例えば、データビット数 stem:[m] が stem:[4]  の場合、必要なパリティビット数 stem:[r] は  stem:[3] です。

### 必要パリティbit数の計算式の意味・覚え方

この不等式は、パリティビットがデータビットとパリティビット自身を含むすべてのビットのエラーを検出できることを保証します。一見複雑な形をしていますが、考え方は簡単です。ポイントは、データビットだけでなく、 ** パリティビット自身もエラーを起こす可能性がある ** ということです。 +
 +
パリティビットは、エラーが起きているbit位置を表すものです。 stem:[2^r] は stem:[r] bits の  stem:[2] 進数で表現できる数の最大数を表します。つまり、 stem:[r] 個のパリティビットがあれば、 最大で stem:[2^r] 個のエラーパターンを表現できます。 +
stem:[m] はデータビット数というよりは、データビットのいずれか stem:[1] bit がエラーを起こしている場合の数（ stem:[0] bit目がエラーのパターン、stem:[1] bit目がエラーのパターン、...、stem:[m-1] bit目がエラーのパターン で 計 stem:[m] パターン）と解釈するとよいです。 +
同様に、stem:[r] もパリティビット数というよりは、パリティビットのいずれか stem:[1] bit がエラーを起こしている場合の数（ stem:[0] bit目がエラーのパターン、stem:[1] bit目がエラーのパターン、...、stem:[r-1] bit目がエラーのパターン で 計 stem:[r] パターン）と解釈します。 +
 +
すなわち、 stem:[m + r] とは、データビットとパリティビットのいずれかの stem:[1] bit がエラーを起こしている場合の数を表します。以上のことから、 少なくとも +

[stem]
++++
r ビットで表現できるエラーパターン （ 2^r ） \geqq データビット、パリティビットの 1bit エラーのパターン（ m + r ）
++++

が成り立つ必要があります。さらに、 データビット、パリティビットの 1bit エラーのパターン数（stem:[m + r]）は、どのビットもエラーを起こしていないパターン、を含んでいないため、 パリティビットは これに stem:[1] を加えた状態数が表現可能である必要があります。すなわち、

[stem]
++++
2^r \geqq m + r + 1
++++

を満たす stem:[r] が必要となります。



